<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 HappyNewYear！！</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <audio id="bgm" src="music.mp3" autoplay loop></audio>
    <div id="autoplay-fallback" class="autoplay-fallback hidden">
        <button id="playButton" class="play-button">点击播放音乐</button>
        <div class="play-hint">如果浏览器阻止了自动播放，请点击此处开始音乐</div>
    </div>
    <div class="container">
        <h1>Happy New Year！ | 2026</h1>
        <p>点击屏幕有惊喜哦<br><br></p>
        <p style="font-size: 17px;">make by 张麦轩（<a href="https://space.bilibili.com/1512804294">@MaxZ</a>）<br>Tips：本网页会播放音频，如果没听到声音请检查浏览器设置</p>
    </div>

    <script>
        class Particle {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.size = Math.random() * 4 + 2;
                this.speedX = (Math.random() - 0.5) * 8;
                this.speedY = (Math.random() - 0.5) * 8;
                this.life = 1;
                this.decay = Math.random() * 0.015 + 0.015;
                const colors = [
                    '#FF1749', '#F50057', '#D50000',
                    '#ff9270', '#FF9100', '#FFB300',
                    '#00BCD4', '#00ACC1', '#0097A7',
                    '#E91E63', '#C2185B', '#880E4F',
                    '#00f114', '#00f114', '#00f114'
                ];
                this.color = colors[Math.floor(Math.random() * colors.length)];

                this.element = document.createElement('div');
                this.element.className = 'particle';
                this.element.style.left = x + 'px';
                this.element.style.top = y + 'px';
                this.element.style.backgroundColor = this.color;
                this.element.style.width = this.size + 'px';
                this.element.style.height = this.size + 'px';
                document.body.appendChild(this.element);
            }

            update() {
                this.x += this.speedX;
                this.y += this.speedY;
                this.speedY += 0.98; 
                this.life -= this.decay;

                this.element.style.left = this.x + 'px';
                this.element.style.top = this.y + 'px';
                this.element.style.opacity = this.life;

                if (this.life <= 0) {
                    this.element.remove();
                    return false;
                }
                return true;
            }
        }

        let particles = [];

        // 创建烟花
        function createFireworks(e) {
            const x = e.clientX;
            const y = e.clientY;
            const particleCount = Math.random() * 80 + 111; // 20-50个粒子

            for (let i = 0; i < particleCount; i++) {
                particles.push(new Particle(x, y));
            }
        }

        // 更新粒子
        function updateParticles() {
            particles = particles.filter(particle => particle.update());
        }

        // 动画循环
        function animate() {
            updateParticles();
            requestAnimationFrame(animate);
        }
        document.addEventListener('click', createFireworks);
        animate();
    </script>
    <script>
        (function () {
            function onDevtoolsAttempt(reason) {
                alert('还是补药用开发者工具逆向页面了，想要看源码就请去https://github.com/maixzzh/Happy-New-Year-2026啊 (￣▽￣)~* \n\n悄悄告诉你，连续按F12是可以突破防御的');
            }

            document.addEventListener('keydown', function (e) {
                if (e.key === 'F12' || e.keyCode === 123) {
                    onDevtoolsAttempt('F12');
                }
                if (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'i')) {
                    onDevtoolsAttempt('Ctrl+Shift+I');
                }
                if (e.ctrlKey && e.shiftKey && (e.key === 'J' || e.key === 'j')) {
                    onDevtoolsAttempt('Ctrl+Shift+J');
                }
                if (e.ctrlKey && (e.key === 'U' || e.key === 'u')) {
                    onDevtoolsAttempt('Ctrl+U');
                }
                if (e.ctrlKey && e.shiftKey && (e.key === 'C' || e.key === 'c')) {
                    onDevtoolsAttempt('Ctrl+Shift+C');
                }
            });
            document.addEventListener('contextmenu', function (e) {
                e.preventDefault();
                onDevtoolsAttempt('contextmenu');
            });
        })();
        (function () {
            const audio = document.getElementById('bgm');
            const fallback = document.getElementById('autoplay-fallback');
            const playBtn = document.getElementById('playButton');

            function showFallback() {
                fallback.classList.remove('hidden');
            }

            function hideFallback() {
                fallback.classList.add('hidden');
            }
            function tryAutoplay() {                
                const playPromise = audio.play();
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        hideFallback();
                    }).catch((error) => {
                        // 自动播放被阻止
                        showFallback();
                    });
                }
            }

            playBtn.addEventListener('click', async function (e) {
                e.stopPropagation();
                try {
                    audio.muted = false;
                    await audio.play();
                    hideFallback();
                } catch (err) {
                    alert('无法播放音频，请检查浏览器设置并允许页面播放声音。');
                }
            });

            window.addEventListener('load', function () {
                tryAutoplay();
            });

            document.addEventListener('click', function onFirstClick() {
                tryAutoplay();
                document.removeEventListener('click', onFirstClick);
            });
        })();
    </script>

</body>

</html>